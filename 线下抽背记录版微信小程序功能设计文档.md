以下是调整后的**线下抽背记录版**微信小程序功能设计文档和低成本部署方案，专注于**记录抽背结果**和**积分结算**，抽背过程由用户线下完成：

---

## **一、功能设计文档（精简版）**
### **1. 功能模块概述**
| 模块 | 功能描述 |
| --- | --- |
| **用户管理** | 登录/注册、好友绑定、用户资料管理 |
| **学习打卡** | 每日打卡（标记学习完成），记录学习天数 |
| **线下抽背记录** | 用户手动输入抽背结果（正确数/错误数） |
| **积分系统** | 日常积分计算、抽背得分统计 |
| **奖励机制** | 礼物赠送、特权发放与使用 |
| **数据统计** | 每周学习报告、历史积分记录 |


---

### **2. 详细功能需求**
#### **2.1 用户管理**
+ **登录/注册**  
    - 微信授权登录（OpenID/UnionID绑定）。  
    - 支持手动添加好友（微信号/邀请码）。
+ **用户资料**  
    - 显示头像、昵称、当前积分、学习天数。

#### **2.2 学习打卡**
+ **每日打卡**  
    - 用户每天点击“完成学习”按钮，标记当日学习完成。  
    - 自动记录学习天数（连续/总天数）。  
    - **无需管理单词内容**，仅记录学习状态。

#### **2.3 线下抽背记录**
+ **抽背规则**  
    - 用户在**线下完成抽背**（如面对面提问），完成后在小程序中**手动输入结果**：  
        * 正确数（0-10）  
        * 错误数（0-10）
    - **角色切换**：用户A提问用户B作答，下次轮换角色。
+ **数据记录**  
    - 保存抽背日期、正确数、错误数、角色（提问者/答题者）。

#### **2.4 积分系统**
+ **积分规则**  
    - **基础分**：每日打卡+1分（最多7分/周）。  
    - **抽背得分**：  
        * **全对（10/10）**：+2分  
        * **每错1个**：-1分
    - **缺卡惩罚**：未打卡-2分。
+ **积分结算**  
    - 每周日24:00自动结算积分，生成周报。

#### **2.5 奖励机制**
+ **礼物赠送**  
    - 得分低的一方需向高分方赠送虚拟礼物（如“进步之星”徽章）。
+ **特权系统**  
    - **免打卡特权**：跳过某天打卡任务。  
    - **免抽背特权**：跳过某次抽背任务。

#### **2.6 数据统计**
+ **学习报告**  
    - 每周生成学习总结（如“本周共打卡7天，抽背正确率90%”）。
+ **历史记录**  
    - 查看每日/每周积分变化趋势图。

---

### **3. 技术实现细节**
#### **3.1 云开发能力**
+ **云数据库**  
    - 存储用户信息、每日打卡记录、抽背结果、积分数据。  
    - **表结构示例**：  

```json
{
  "users": {
    "_id": "用户ID",
    "nickname": "用户昵称",
    "score": 15,
    "progress": { "totalDays": 20, "consecutiveDays": 7 }
  },
  "quizzes": {
    "_id": "抽背ID",
    "userId": "用户ID",
    "date": "2025-09-02",
    "correctCount": 9,
    "wrongCount": 1,
    "role": "答题者"
  }
}
```

+ **云函数**  
    - 定时任务（每周结算积分）。  
    - 抽背结果计算（根据正确数/错误数更新积分）。

#### **3.2 前端交互**
+ **学习打卡**  
    - 点击按钮标记“完成学习”，无需填写单词内容。
+ **抽背记录页面**  
    - 输入框：用户手动输入正确数和错误数（如“9正确，1错误”）。  
    - 角色选择：切换“提问者”或“答题者”。
+ **积分展示**  
    - 实时显示当前积分和周排名。

---

### **4. 低成本部署方案**
#### **1. 使用微信云开发（无需服务器）**
+ **开通云开发**  
    - 在微信公众平台开启云开发功能，获取环境ID（ENV）。
+ **云数据库与存储**  
    - 存储用户数据、抽背记录、积分统计。  
    - 无需额外服务器，完全依赖云开发能力。

#### **2. 域名与SSL证书**
+ **无需购买域名**  
    - 云开发默认支持HTTPS访问（自动配置SSL证书）。
+ **备案要求**  
    - 中国大陆用户需备案域名（若使用自定义域名）。

#### **3. 成本估算**
| 项目 | 费用 | 说明 |
| --- | --- | --- |
| 云开发免费配额 | 0元 | 每月前50000次数据库读写、200GB存储空间、10000次云函数调用 |
| 域名备案 | 0元（可选） | 若需自定义域名，需备案 |
| 第三方服务（如PDF生成） | 按需付费 | 可选功能，初期可忽略 |


---

### **5. 部署步骤**
#### **1. 初始化云开发**
1. 在微信公众平台开通云开发，创建环境。  
2. 在微信开发者工具中初始化项目，选择“云开发”模板。

#### **2. 数据库与云函数**
+ **创建集合**  
    - `users`（用户信息）  
    - `quizzes`（抽背记录）
+ **编写云函数**  
    - **积分结算云函数**：每周日自动计算积分。  

```javascript
const cloud = require('wx-server-sdk');
cloud.init({ env: 'your-env-id' });

exports.main = async () => {
  const db = cloud.database();
  const users = await db.collection('users').get();
  const quizzes = await db.collection('quizzes').where({
    date: new Date().toISOString().split('T')[0].slice(0, 7) // 当前月
  }).get();

  // 计算用户积分...
};
```

#### **3. 前端开发**
+ **学习打卡页面**  
    - 简单按钮“完成学习”，记录日期。
+ **抽背记录页面**  
    - 输入框：用户手动输入正确数和错误数（如“9正确，1错误”）。  
    - 角色选择：切换“提问者”或“答题者”。
+ **积分展示页面**  
    - 实时显示当前积分和周排名。

#### **4. 发布与维护**
+ **发布小程序**  
    - 通过微信开发者工具上传代码，提交审核。
+ **监控与优化**  
    - 使用云开发控制台查看数据库读写次数、云函数调用日志。

---

### **6. 注意事项**
1. **用户输入数据准确性**  
    - 提供输入验证（如限制正确数+错误数=10）。
2. **抽背结果录入**  
    - 用户需在抽背完成后手动录入结果，避免遗漏。
3. **免费配额限制**  
    - 若用户量较大（如超过100人），需升级付费计划或优化数据读写策略。

---

### **7. 总结**
通过**微信云开发**，无需服务器即可实现**线下抽背记录**的小程序，用户只需在外部APP学习单词，在小程序中**手动输入抽背结果**，即可进行**积分竞争**和**奖励机制**。此方案成本极低（几乎免费），且开发维护简单，非常适合个人或小型团队快速落地。

